<!doctype html>
<html lang="zh-hant">
	<head>
		<meta charset="UTF-8" />
		<title>{{GLOBAL_TITLE}}</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="shortcut icon" type="image/x-icon" href="{{url_for('static', filename='img/favicon.ico')}}">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
		<link href="http://fonts.googleapis.com/earlyaccess/notosanstc.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
		<link rel="stylesheet" href="{{url_for('static', filename='css/map.css')}}">
	</head>
	<body>
		<div class="container-fluid" id="map">			
		</div>
		<div id="detail-box">
			<img id="toggle-detail" src="{{url_for('static', filename='img/right_arrow.svg')}}"/>
			<div class="container-fluid text-center" id="detail-index">	
				<input id="adv-search" type="text" placeholder="搜尋河川名" name="adv-search"/>
				<div class="nav nav-tabs" style="">
					<a data-toggle="tab" href="#detail-pcc" class="active">標案檢索</a>
					<a data-toggle="tab" href="#detail-news">最新消息</a>
					<a data-toggle="tab" href="#detail-group">河川社群</a>
				</div>
				<div class="tab-content text-left">
					<div id="detail-pcc" class="tab-pane fade active show">
						<div class="nav nav-tabs">
							<a data-toggle="tab" href="#pcc-years" class="active">年份</a>
							<a data-toggle="tab" href="#pcc-img" class="disable">圖庫</a>					
						</div>
						<div class="tab-content">
							<div id="pcc-years" class="tab-pane fade active show">
								<div style="width: 100%;">
									<div class="pcc-filter">
										<label class="radio-style1" for="year-filter-1">
											<p>民國<input type="text" value="107" placeholder="107"/>年至<input type="text" value="108" placeholder="108"/>年</p>
										<input type="radio" name="year-filter" id="year-filter-1"/><span class="radio-style1-box"></span></label>
									</div>
									<div class="pcc-filter">
										<label class="radio-style1" for="year-filter-2">
											<p>民國<input type="text" value="106" placeholder="106" style="color: rgb(252,112,5)"/>年及<input type="text" value="107" placeholder="107" style="color: rgb(252,152,45)"/>年及<input type="text" value="108" placeholder="108" style="color: rgb(252,192,85)"/>年</p>
										<input type="radio" name="year-filter" id="year-filter-2"/><span class="radio-style1-box"></span></label>
									</div>
									<div style="width: 100%;">										
										<div style="text-align:center; margin: 10% 2% 2% 2%;"> 
											<a style="float: left; font-size: 1.2em; border-bottom: 3px solid white;">標案類型</a>
											<a class="label-toggle active">已決標</a>
											<label class="switch" for="toggle-isdone">
												<input type="checkbox" name="toggle-isdone" id="toggle-isdone">
												<span class="slider round"></span>
											</label>
											<a class="label-toggle active">未決標</a>
										</div>									
										<div id="pcc-list" class="container-fluid scroll-style scroll-list">
										</div>										
									</div>
								</div>								
							</div>
						</div>
					</div>
					<div id="detail-news" class="tab-pane fade">
						<div id="news-pcc">
							<div class="nav nav-tabs text-center custom-nav" style="border-bottom: 1px solid #AAA;">
								<a data-toggle="tab" href="#news-newest" class="active"><span></span>最新標案公告</a>
								<a data-toggle="tab" href="#news-last"><span></span>最後決標公告</a>					
							</div>
							<div class="tab-content">
								<div id="news-newest" class="tab-pane fade active show scroll-style scroll-list">
									<div class="row"><div class="col-4"><a>機關代碼</a></div><div class="col"><a>3.13.20.20</a></div></div>
									<div class="row"><div class="col-4"><a>機關名稱</a></div><div class="col"><a>經濟部水利署第十河川局</a></div></div>
									<div class="row"><div class="col-4"><a>機關地址</a></div><div class="col"><a>220新北市板橋區四川路2段橋頭1號</a></div></div>
									<div class="row"><div class="col-4"><a>聯絡人</a></div><div class="col"><a>林思達</a></div></div>
									<div class="row"><div class="col-4"><a>連絡電話</a></div><div class="col"><a>(02)89669870 分機 1259</a></div></div>
									<div class="row"><div class="col-4"><a>標案案號</a></div><div class="col"><a>W10P108014</a></div></div>
									<div class="row"><div class="col-4"><a>標案名稱</a></div><div class="col"><a>108年度淡水河流域及河口海域基樁埋設大斷面水文測站測量工作</a></div></div>
									<div class="row"><div class="col-4"><a>預算金額</a></div><div class="col"><a>1,305,300元</a></div></div>
									<div class="row"><div class="col-4"><a>履約地點</a></div><div class="col"><a>新北市－全區</a></div></div>
								</div>
							</div>
						</div>
						<div id="more-news" class=" scroll-style scroll-list" style="max-height: 15vh;">
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
							<div class="row"><div class="col-4"><a>108.09.01</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAAAA</a></div></div>
						</div>
					</div>
					<div id="detail-group" class="tab-pane fade">
						<h3>河川社群</h3>
						<p>Some content in menu 2.</p>
					</div>
				</div>
			</div>
		</div>
		<div id="toggle-back" class="text-center">
			<div id="toggle-back-dot">● ●
				<div id="toggle-back-index"><a href="{{url_for('portal')}}">個人主頁</a><a href="#">動態說明</a></div>
			</div>
		</div>
		
		<!-- ----------------------------------------- -->
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
    	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>			
		<script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.5.1/velocity.min.js"></script>
		<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
		<script src="{{url_for('static', filename='js/leaflet-tilelayer-wmts.js')}}"></script>
		<script> 
			//leaflet
			
			var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://www.mapbox.com/">mapbox</a> ',
				//mbUrl = 'https://api.mapbox.com/styles/v1/mapbox/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoianMwMDE5MyIsImEiOiJjandjYWtwem0wYnB3NDlvN2h0anRuM3Z1In0.Y7tYEgVHjszA66NQ08PVYg',
				MymbUrl = 'https://api.mapbox.com/styles/v1/js00193/{id}/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoianMwMDE5MyIsImEiOiJjandjYWtwem0wYnB3NDlvN2h0anRuM3Z1In0.Y7tYEgVHjszA66NQ08PVYg#15.7/44.599542/-70.560438/0';
			var satellite = L.tileLayer(MymbUrl, {id: 'ck0x9ai2j5kgb1co36kagohqm',   attribution: mbAttr}),
				streets = L.tileLayer(MymbUrl, {id: 'ck0lupyad8k061dmv7zvbvwgv',   attribution: mbAttr});
			
			var mymap = L.map('map', {
				center: [25.1426293,121.4592866],
				zoom: 18,
				maxZoom: 18,
				minZoom: 7,
				layers: [streets],
				zoomControl: false
			});		
			L.control.zoom({
				position:'topright'
			}).addTo(mymap);
			
			var baseMaps = {
				"空照圖": satellite,
				//"空照街道": satellite_street,
				
				"街道圖": streets,
			};
			/*
			var overlayMaps = {			
				"河川河道": river_layer,
			};								*/
			L.marker([25.142691, 121.459289]).addTo(mymap)
			.bindTooltip('A pretty CSS3 popup.<br> Easily customizable.')
			.openTooltip();
			
			L.Control.Printer = L.Control.extend({
				onAdd: function(map) {
					var btn = L.DomUtil.create('button','leaflet-control-printer');
					btn.onclick = function(){
						console.log("print!");
					};
					return btn;
				}				
			});
			L.control.printer = function(opts) {
				return new L.Control.Printer(opts);
			}
			
			L.Control.Share = L.Control.extend({
				onAdd: function(map) {
					var btn = L.DomUtil.create('button','leaflet-control-share');
					btn.onclick = function(){
						console.log("share!");
					};
					return btn;
				}				
			});
			L.control.share = function(opts) {
				return new L.Control.Share(opts);
			}
			
			L.control.share({ position: 'bottomright' }).addTo(mymap);			
			L.control.printer({ position: 'bottomright' }).addTo(mymap);			
			L.control.layers(baseMaps, null, {position:'bottomright'}).addTo(mymap);				
			
			mymap.on('moveend', function() {  
				console.log(mymap.getBounds().getWest()); 
			});
		</script>
		<script>
			//detail box
			var toggle=false;
			$('#toggle-detail').click(function(){
				if(!toggle){
					$("#detail-box").velocity({width: "400px"}, {duration:500, loop:false, easing:"spring"});
					$(this).velocity({rotateZ:'180deg'}, {duration:300, loop:false, easing:"easeOutSine"});
					toggle = true;
				}
				else{
					$("#detail-box").velocity({width: "0px"}, {duration:300, loop:false, easing:"easeOutSine"});
					$(this).velocity({rotateZ:'0deg'}, {duration:300, loop:false, easing:"easeOutSine"});
					toggle = false;
				}
			});
			
			$('#toggle-isdone').on('input', function() {
				if($("#toggle-isdone:checked").val()=="on"){
				}
			});
			
			var i=0;
			for(i=0; i<20; i++) {
				$("#pcc-list").append('<div class="row"><div class="col-4"><a href="#">108年度</a></div><div class="col"><a href="#">AAAAAAAAAAAAAAAA</a></div></div>');
			}
		</script>
	</body>
 </html>
